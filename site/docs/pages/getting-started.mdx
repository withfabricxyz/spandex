# Quick Start Guide

## Overview

SMAL makes token swap integration easy for developers by providing a simple and consistent interface to interact with multiple decentralized exchanges via multiple aggregators. This provides redundancy, better pricing, and expanded liquidity for token swaps.

## 1. Install

To install SMAL, run the following command:

:::code-group

```bash [npm]
npm i viem @withfabic/smal @withfabric/smal-simulation
```

```bash [bun]
bun i viem @withfabic/smal @withfabric/smal-simulation
```

```bash [pnpm]
pnpm i viem @withfabric/smal @withfabric/smal-simulation
```

:::

## 2. Configure

Create a shared meta aggregator instance with your desired providers and preferences. There are many configuration options available, see [configuration reference](/configuration.mdx) for more details.

Addtionally, you can create a simulating meta aggregator instance to verify quotes and compare against simulated outcomes. [Learn more about simulation](/simulation.mdx).

```ts filename="aggregator.ts" twoslash
import { buildMetaAggregator } from "@withfabric/smal";

export const aggregator = buildMetaAggregator({
  providers: {
    fabric: {},
    odos: { referralCode: 1234 },
    kyberswap: { clientId: "your client id" },
    // "0x": { apiKey: "YOUR_ZEROX_API_KEY" },
  },
  options: {
    deadlineMs: 5_000,
    integratorFeeAddress: "0xFee00000000000000000000000000000000000fee",
    integratorSwapFeeBps: 25,
  },
});
```

```ts
import { buildMetaAggregator } from "@withfabric/smal";

export const aggregator = buildMetaAggregator({
  providers: {
    fabric: {},
    odos: { referralCode: 1234 },
    kyberswap: { clientId: "your client id" },
    // "0x": { apiKey: "YOUR_ZEROX_API_KEY" },
  },
  options: {
    deadlineMs: 5_000,
    integratorFeeAddress: "0xFee00000000000000000000000000000000000fee",
    integratorSwapFeeBps: 25,
  },
});

const quote = await quoter.fetchBestQuote({
  swap: {
    chainId: 8453,
    inputToken: "0x4200000000000000000000000000000000000006",
    outputToken: "0xd9AAEC86B65D86f6A7B5B1b0c42FFA531710b6CA",
    mode: "exactIn",
    inputAmount: 1_000_000_000_000_000_000n, // 1 WETH
    slippageBps: 50,
    swapperAccount: "0x1234567890abcdef1234567890abcdef12345678",
  },
  client: pubClient,
  strategy: "simulatedPrice",
});
```

## 3. Fetch Best Quote

```ts filename="quote.ts" twoslash
import { quoter } from "./aggregator.js";

const quote = await quoter.fetchBestQuote(
  {
    chainId: 8453,
    inputToken: "0x4200000000000000000000000000000000000006",
    outputToken: "0xd9AAEC86B65D86f6A7B5B1b0c42FFA531710b6CA",
    mode: "exactIn",
    inputAmount: 1_000_000_000_000_000_000n, // 1 WETH
    slippageBps: 50,
    swapperAccount: "0x1234567890abcdef1234567890abcdef12345678",
  },
  "quotedPrice",
);
```

## 4. Execute Quote

```ts twoslash
// [!include quote.ts]

const walletClient = createWalletClient({ // [!code focus]
  account: "0xdead00000000000000000000000000000000beef", // [!code focus]
  chain: base, // [!code focus]
  transport: http(), // [!code focus]
}); // [!code focus]

if (!quote) { // [!code focus]
  throw new Error("No quotes available"); // [!code focus]
} // [!code focus]

const tx = await walletClient.sendTransaction(quote.txData); // [!code focus]
```


---

Now that you have covered the basics, move on to simulation. Or, if you want to jump straight to a working swap interface, check out the [demo site](https://sip-app-production.up.railway.app/swap) and corrsponding [github project](https://sip-app-production.up.railway.app/swap).